<!DOCTYPE html><html data-n-head-ssr="" lang="en" data-n-head="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D"><head><title>@luxdamore/nuxt-prune-html - 🔌⚡ Nuxt module to prune html before sending it to the browser (it removes elements matching CSS selector(s)), useful for boosting performance showing a different HTML for bots/audits by removing all the scripts with dynamic rendering</title><meta data-hid="charset" charset="utf-8"><meta data-hid="description" name="description" content="🔌⚡ Nuxt module to prune html before sending it to the browser (it removes elements matching CSS selector(s)), useful for boosting performance showing a different HTML for bots/audits by removing all the scripts with dynamic rendering"><meta data-hid="keywords" name="keywords" content="nuxt-module,vuejs,nuxtjs,nuxt,modules,performance,optimize,optimization,optimization-algorithms,cheerio,html,prune,pruning,bot,lighthouse,audit,web-vitals,pagespeed-insight,dynamic-rendering,measure"><meta data-hid="msapplication-tap-highlight" name="msapplication-tap-highlight" content="no"><meta data-n-head="ssr" name="msapplication-config" content="/browserconfig.xml"><meta data-n-head="ssr" data-hid="viewport" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="mobile-web-app-capable" name="mobile-web-app-capable" content="yes"><meta data-n-head="ssr" data-hid="apple-mobile-web-app-title" name="apple-mobile-web-app-title" content="@luxdamore/nuxt-prune-html"><meta data-n-head="ssr" data-hid="author" name="author" content="Luca Iaconelli <lucabelli@msn.com> (https://lucaiaconelli.it)"><meta data-n-head="ssr" data-hid="theme-color" name="theme-color" content="#42b883"><meta data-n-head="ssr" data-hid="og:type" name="og:type" property="og:type" content="website"><meta data-n-head="ssr" data-hid="og:title" name="og:title" property="og:title" content="@luxdamore/nuxt-prune-html"><meta data-n-head="ssr" data-hid="og:site_name" name="og:site_name" property="og:site_name" content="@luxdamore/nuxt-prune-html"><meta data-n-head="ssr" data-hid="og:description" name="og:description" property="og:description" content="🔌⚡ Nuxt module to prune html before sending it to the browser (it removes elements matching CSS selector(s)), useful for boosting performance showing a different HTML for bots/audits by removing all the scripts with dynamic rendering"><meta data-n-head="ssr" data-hid="og:url" name="og:url" property="og:url" content="https://luxdamore.github.io/nuxt-prune-html"><meta data-n-head="ssr" data-hid="og:image" name="og:image" property="og:image" content="https://luxdamore.github.io/nuxt-prune-html/nuxt-prune-html/_nuxt/icons/icon_512x512.fc1071.png"><meta data-n-head="ssr" data-hid="og:image:width" name="og:image:width" property="og:image:width" content="512"><meta data-n-head="ssr" data-hid="og:image:height" name="og:image:height" property="og:image:height" content="512"><meta data-n-head="ssr" data-hid="og:image:type" name="og:image:type" property="og:image:type" content="image/png"><meta data-n-head="ssr" data-hid="twitter:creator" name="twitter:creator" property="twitter:creator" content="@luxdamore"><base href="/nuxt-prune-html/"><link rel="shortcut icon" data-hid="favicon" type="image/x-icon" href="/nuxt-prune-htmlfavicon.ico"><link type="text/plain" data-hid="humans-txt" rel="author" href="humans.txt"><link data-n-head="ssr" data-hid="shortcut-icon" rel="shortcut icon" href="/nuxt-prune-html/_nuxt/icons/icon_64x64.fc1071.png"><link data-n-head="ssr" data-hid="apple-touch-icon" rel="apple-touch-icon" href="/nuxt-prune-html/_nuxt/icons/icon_512x512.fc1071.png" sizes="512x512"><link data-n-head="ssr" rel="manifest" href="/nuxt-prune-html/_nuxt/manifest.d0df1b19.json" data-hid="manifest"><script data-n-head="ssr" data-hid="nuxt-jsonld-b755afe5" type="application/ld+json">{"@context":"https://schema.org/","@type":"SoftwareSourceCode","programmingLanguage":"Javascript","targetProduct":"NuxtJs, VueJs","name":"@luxdamore/nuxt-prune-html","description":"🔌⚡ Nuxt module to prune html before sending it to the browser (it removes elements matching CSS selector(s)), useful for boosting performance showing a different HTML for bots/audits by removing all the scripts with dynamic rendering","about":"🔌⚡ Nuxt module to prune html before sending it to the browser (it removes elements matching CSS selector(s)), useful for boosting performance showing a different HTML for bots/audits by removing all the scripts with dynamic rendering","author":"Luca Iaconelli <lucabelli@msn.com> (https://lucaiaconelli.it)","url":"https://luxdamore.github.io/nuxt-prune-html","codeSampleType":"https://luxdamore.github.io/nuxt-prune-html","workExample":"https://luxdamore.github.io/nuxt-prune-html","codeRepository":"https://luxdamore.github.io/nuxt-prune-html"}</script><style data-vue-ssr-id="7cdb49f1:0 6614ba0e:0 f034229e:0 b2d98574:0 4f39745d:0">/*! modern-normalize v1.0.0 | MIT License | https://github.com/sindresorhus/modern-normalize */*,:after,:before{box-sizing:border-box}:root{-moz-tab-size:4;-o-tab-size:4;tab-size:4}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,"Segoe UI",Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji"}hr{height:0;color:inherit}abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace,SFMono-Regular,Consolas,"Liberation Mono",Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}::-moz-focus-inner{border-style:none;padding:0}:-moz-focusring{outline:1px dotted ButtonText}:-moz-ui-invalid{box-shadow:none}legend{padding:0}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}:root{font-size:16px}html{-webkit-text-size-adjust:100%;-moz-text-size-adjust:100%;text-size-adjust:100%;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeSpeed}body{color:#333;background-color:#333}.container{width:100%;max-width:700px;margin:0 auto;padding:8px 16px}main{background-color:#fff;border-radius:6px}h1{font-size:2em;line-height:1;text-transform:uppercase}a{color:#106a10}img{width:100%;max-width:100%;height:auto;margin:16px auto;border-radius:6px}.nuxt-progress{position:fixed;top:0;left:0;right:0;height:23px;width:0;opacity:1;transition:width .1s,opacity .4s;background-color:#42b883;z-index:999999}.nuxt-progress.nuxt-progress-notransition{transition:none}.nuxt-progress-failed{background-color:#e74c3c}.hljs{display:block;overflow-x:auto;padding:.5em;color:#333;background:#f8f8f8}.hljs-comment,.hljs-quote{color:#998;font-style:italic}.hljs-keyword,.hljs-selector-tag,.hljs-subst{color:#333;font-weight:700}.hljs-literal,.hljs-number,.hljs-tag .hljs-attr,.hljs-template-variable,.hljs-variable{color:teal}.hljs-doctag,.hljs-string{color:#d14}.hljs-section,.hljs-selector-id,.hljs-title{color:#900;font-weight:700}.hljs-subst{font-weight:400}.hljs-class .hljs-title,.hljs-type{color:#458;font-weight:700}.hljs-attribute,.hljs-name,.hljs-tag{color:navy;font-weight:400}.hljs-link,.hljs-regexp{color:#009926}.hljs-bullet,.hljs-symbol{color:#990073}.hljs-built_in,.hljs-builtin-name{color:#0086b3}.hljs-meta{color:#999;font-weight:700}.hljs-deletion{background:#fdd}.hljs-addition{background:#dfd}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.readme[data-v-9407f738]>section>p:nth-child(2){display:flex;flex:1 1 100%;flex-direction:row;flex-wrap:nowrap;min-height:36px;padding:6px 12px;overflow-x:auto;font-size:0;background-color:rgba(220,230,240,.63);border-radius:5px}.readme[data-v-9407f738] a{display:inline-block;margin:2px 1px}.readme[data-v-9407f738] blockquote{margin:1rem auto;padding:4px 0 4px 1.5rem;color:#819198;border-left:.3rem solid #dce6f0}.readme[data-v-9407f738] blockquote p{margin:0}.readme[data-v-9407f738] code{display:inline-block;padding:0 3px;overflow-y:hidden;vertical-align:middle;background-color:#dce6f0;border-radius:6px}.readme[data-v-9407f738] pre code{display:block;padding:.5em;overflow-x:auto;vertical-align:inherit;background-color:#f8f8f8}</style></head><body><div data-server-rendered="true" id="__nuxt"><div id="__layout"><main class="container"><article class="readme markdown-body" data-v-9407f738=""><section><h1>🔌⚡ Nuxt Prune HTML</h1><p><a href="https://luxdamore.github.io/nuxt-prune-html/"><img src="https://img.shields.io/badge/code%20quality-A-informational?style=flat" alt="Code Quality"></a><br><a href="https://npmjs.com/package/@luxdamore/nuxt-prune-html"><img src="https://img.shields.io/npm/v/@luxdamore/nuxt-prune-html/latest.svg?style=flat&amp;color=darkorange&amp;label=version" alt="Version"></a><br><a href="https://npmjs.com/package/@luxdamore/nuxt-prune-html"><img src="https://img.shields.io/npm/dt/@luxdamore/nuxt-prune-html.svg?style=flat&amp;color=darkgreen" alt="Downloads"></a><br><a href="https://npmjs.com/package/@luxdamore/nuxt-prune-html"><img src="https://img.shields.io/badge/dependencies-up%20to%20date-darkgreen.svg?style=flat" alt="Dependencies"></a><br><a href="https://circleci.com/gh/LuXDAmore/nuxt-prune-html"><img src="https://img.shields.io/circleci/project/github/LuXDAmore/nuxt-prune-html.svg?style=flat&amp;color=darkgreen" alt="Circle CI"></a><br><a href="https://www.paypal.me/luxdamore"><img src="https://img.shields.io/badge/paypal-donate-black.svg?style=flat" alt="Donate"></a></p><blockquote><p>Nuxt module to prune html before sending it to the browser (it removes elements matching CSS selector(s)), useful for boosting performance showing a different HTML for bots/audits by removing all the scripts with dynamic rendering.</p></blockquote><h2>💘 Motivation</h2><p>Due to the versatility of Nuxt (and of the SSR in general), a website generated (or served) via node server, has everything it needs already injected (in the HTML, ex. styles). So, usually, for a bot or for a human, the website its almost visually the same without Javascript.</p><p>This library is born to remove the scripts injected in the HTML<strong>only</strong>if a visitor is a<strong>Bot</strong>(or a "<strong>Performance Audit</strong>", ex.<strong>Lighthouse</strong>).<br>This should<strong>speed up</strong>(<strong>blazing fast</strong>) your<em>nuxt-website</em>up to a value of<strong>~95</strong>in<strong>performance</strong>during an<em>Audit</em>because it<a href="https://web.dev/lighthouse-performance/">cheats various scenarios</a>.</p><blockquote><p>Inspired by this<a href="https://github.com/nuxt/rfcs/issues/22">rcfs</a>and this<a href="https://github.com/nuxt/nuxt.js/issues/2822">issue</a>.</p></blockquote><h3>Features</h3><ul><li>Prune based on<strong>mobile detection</strong>;<ul><li>Match the<strong>user agent</strong>;</li><li>Match a<strong>bot</strong>;</li><li>Match an<strong>audit</strong>;</li></ul></li><li>Prune based on<strong>headers values</strong>(<em>useful in Lambdas</em>);</li><li>Prune based on<strong>query parameters</strong>(<em>useful during navigation or generation, for an hybrid-experience</em>).</li></ul><h3>Pro et contra</h3><blockquote><p>This could cause some unexpected behaviors.</p></blockquote><p><strong>Cons.:</strong></p><ul><li>no<a href="https://nuxtjs.org/docs/2.x/concepts/server-side-rendering/#server-side-rendering-steps-with-nuxtjs"><code>SPA routing</code></a>on<code>client-side</code>for<strong>bots and audits</strong>;</li><li>no<a href="https://ssr.vuejs.org/guide/hydration.html"><code>hydration</code></a>on<code>client-side</code>for<strong>bots and audits</strong>:<ul><li>ex.<a href="https://github.com/maoberlehner/vue-lazy-hydration"><code>vue-lazy-hydration</code></a>,<em>hydrateOnInteraction</em>,<em>hydrateWhenIdle</em>and<em>hydrateWhenVisible</em>are<strong>javascript client-side code</strong>so they're pruned out;</li></ul></li><li>no<a href="https://nuxtjs.org/api/components-client-only/"><code>&lt;client-only&gt;</code>components</a>;</li><li>can break<code>lazy-load</code>for images.</li></ul><p><strong>Pros.:</strong></p><ul><li>some of these features<strong>aren't "used by"</strong>a bot/audit, so you don't really need them:<ul><li>bots doesn't handle<code>SPA routing</code>;</li><li><a href="https://nuxtjs.org/api/components-client-only/"><code>&lt;client-only&gt;</code>components</a>could lead in a slower TTI;</li><li><a href="https://nuxtjs.org/api/components-client-only/"><code>&lt;client-only&gt;</code>components</a>can contain a<a href="https://nuxtjs.org/api/components-client-only/">static placeholder</a>;</li></ul></li><li><code>lazy-load</code>for images can be fixed with a<a href="https://web.dev/native-lazy-loading/">native attribute</a>, or with a custom<code>script</code>/<code>selectorToKeep</code>(<em>check the configuration</em>);</li><li><code>hydration</code><strong>decrease</strong>performance, so it's ok to prune it for<code>bots or audits</code>;</li><li>less HTML, assets and resources are served to browsers and clients;</li><li>bot/audit only have the Javascript they need;</li><li>with<strong>less assets</strong>to download, the number of urls crawled are<strong>widely boosted</strong>;</li><li>bots,<a href="https://developers.google.com/speed/pagespeed/insights/">PageSpeed Insights</a>,<a href="https://web.dev/measure/">Google Measure</a>and<a href="https://developers.google.com/web/tools/lighthouse">Lighthouse Audit</a>are already pruned by the plugin with the default configuration;</li><li>faster<a href="https://web.dev/vitals/">web-vitals</a>, faster TTI, faster FCP, faster FMP,<strong>faster all</strong>.</li></ul><p><strong>N.B.:</strong><em>This is known as<a href="https://developers.google.com/search/docs/guides/dynamic-rendering">Dynamic Rendering</a>and<strong>it's not</strong>considered<a href="https://www.wordstream.com/black-hat-seo">black-hat</a>or<a href="https://en.wikipedia.org/wiki/Cloaking">cloaking</a></em>.</p><hr><h4>💡 Lighthouse</h4><p><img src="lighthouse/before.jpg" alt="Lighthouse Audit before"><br><img src="lighthouse/after.jpg" alt="Lighthouse Audit after"></p><hr><h2>Setup</h2><ol><li>Install<code>@luxdamore/nuxt-prune-html</code>as a dependency:<ul><li><code>yarn add @luxdamore/nuxt-prune-html</code>;</li><li>or,<code>npm install --save @luxdamore/nuxt-prune-html</code>;</li></ul></li><li>Add<code>@luxdamore/nuxt-prune-html</code>in the<code>modules</code>array of your<code>nuxt.config.js</code>.</li></ol><h2>Configuration</h2><pre><code class="language-js">
    <span class="hljs-comment">// nuxt.config.js</span>
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {

        <span class="hljs-comment">// Module - extension</span>
        <span class="hljs-attr">modules</span>: [ <span class="hljs-string">'@luxdamore/nuxt-prune-html'</span> ],

        <span class="hljs-comment">// Module - default config</span>
        <span class="hljs-attr">pruneHtml</span>: {
            <span class="hljs-attr">enabled</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// `true` in production</span>
            <span class="hljs-attr">hideGenericMessagesInConsole</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// `false` in production</span>
            <span class="hljs-attr">hideErrorsInConsole</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// disable the `console.error` method</span>
            <span class="hljs-attr">hookRenderRoute</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// Activate in `hook:render:route`</span>
            <span class="hljs-attr">hookGeneratePage</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// Activate in `hook:generate:page`</span>
            <span class="hljs-attr">selectors</span>: [
                <span class="hljs-comment">// CSS selectors to prune</span>
                <span class="hljs-string">'link[rel="preload"][as="script"]'</span>,
                <span class="hljs-string">'script:not([type="application/ld+json"])'</span>,
            ],
            <span class="hljs-attr">selectorsToKeep</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// disallow pruning of scripts with this class (could be an array of classes), N.B.: each `selectorsToKeep` will be appended to every `selectors`, ex.: `script:not([type="application/ld+json"]):not(__selectorToKeep__)`</span>
            <span class="hljs-attr">link</span>: [], <span class="hljs-comment">// Inject custom links, only if pruned</span>
            <span class="hljs-attr">script</span>: [], <span class="hljs-comment">// Inject custom scripts, only if pruned</span>
            <span class="hljs-attr">htmlElementClass</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// this is a string added as a class to the &lt;html&gt; element</span>
            <span class="hljs-attr">cheerio</span>: {
                <span class="hljs-comment">// this is the config passed in the `cheerio.load(__config__)` method</span>
                <span class="hljs-attr">xmlMode</span>: <span class="hljs-literal">false</span>,
            },
            <span class="hljs-attr">types</span>: [
                <span class="hljs-comment">// it's possibile to add different rules/types of pruning</span>
                <span class="hljs-comment">// array of values: [ 'default-detect', 'query-parameters', 'headers-exist' ]</span>
                <span class="hljs-comment">// ex.: `[ 'headers-exist' ]` force only to check query-parameters values</span>
                <span class="hljs-string">'default-detect'</span>,
            ],
            <span class="hljs-comment">// 👇🏻 Type: `default-detect`</span>
            <span class="hljs-attr">headerNameForDefaultDetection</span>: <span class="hljs-string">'user-agent'</span>, <span class="hljs-comment">// The header-key base for `default-detect`, `req.headers[ headerNameForDefaultDetection ]`</span>
            <span class="hljs-attr">isBot</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// remove selectors if is a bot</span>
            <span class="hljs-attr">isAudit</span>: <span class="hljs-literal">true</span>, <span class="hljs-comment">// remove selectors if match the `auditUserAgent`</span>
            <span class="hljs-attr">ignoreBotOrAudit</span>: <span class="hljs-literal">false</span>, <span class="hljs-comment">// remove selectors in any case, not depending on Bot or Audit</span>
            <span class="hljs-attr">auditUserAgent</span>: <span class="hljs-string">'lighthouse'</span>, <span class="hljs-comment">// prune if `res.header[ headerNameForDefaultDetection ]` match with this value, could be a string or an array of strings</span>
            <span class="hljs-attr">matchUserAgent</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// prune if `res.header[ headerNameForDefaultDetection ]` match with this value, could be a string or an array of strings</span>
            <span class="hljs-comment">// 👇🏻 Type: 'query-parameters', (you can also specify routes in the `nuxt.config`, ex.: `{ generate: { routes: [ '/?prune=true' ] } }` )</span>
            <span class="hljs-attr">queryParametersToPrune</span>: [
                <span class="hljs-comment">// array of objects (key-value), trigger the pruning if 'query-parameters' is present in `types` and at least one value, ex. `/?prune=true`</span>
                {
                    <span class="hljs-attr">key</span>: <span class="hljs-string">'prune'</span>,
                    <span class="hljs-attr">value</span>: <span class="hljs-string">'true'</span>,
                },
            ],
            <span class="hljs-attr">queryParametersToExcludePrune</span>: [], <span class="hljs-comment">// same as `queryParametersToPrune`, exclude the pruning if 'query-parameters' is present in `types` and at least one value is matched, this priority is over than `queryParametersToPrune`</span>
            <span class="hljs-comment">// 👇🏻 Type: 'headers-exist'</span>
            <span class="hljs-attr">headersToPrune</span>: [], <span class="hljs-comment">// same as `queryParametersToPrune`, but it checks `req.headers`</span>
            <span class="hljs-attr">headersToExcludePrune</span>: [], <span class="hljs-comment">// same as `queryParamToExcludePrune`, but it checks `req.headers`, this priority is over than `headersToPrune`</span>
            <span class="hljs-comment">// Emitted events for callbacks methods</span>
            <span class="hljs-attr">onBeforePrune</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// ({ result, [ headers, res ] }) =&gt; {}, `headers` and `res` are not available on `generate`</span>
            <span class="hljs-attr">onAfterPrune</span>: <span class="hljs-literal">null</span>, <span class="hljs-comment">// ({ result, [ headers, res ] }) =&gt; {}, `headers` and `res` are not available on `generate`</span>
        },

    };

</code></pre><p>With<code>link</code>and<code>script</code>it's possibile to add one or more objects on the pruned HTML, ex.:</p><pre><code class="language-javascript">
    <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> {
        <span class="hljs-attr">pruneHtml</span>: {
            <span class="hljs-attr">link</span>: [
                {
                    <span class="hljs-attr">rel</span>: <span class="hljs-string">'preload'</span>,
                    <span class="hljs-attr">as</span>: <span class="hljs-string">'script'</span>,
                    <span class="hljs-attr">href</span>: <span class="hljs-string">'/my-custom-lazy-load-for-bots.js'</span>,
                    <span class="hljs-attr">position</span>: <span class="hljs-string">'phead'</span>, <span class="hljs-comment">// Default value is 'body', other allowed values are: 'phead', 'head' and 'pbody'</span>
                },
                {
                    <span class="hljs-attr">rel</span>: <span class="hljs-string">'stylesheet'</span>,
                    <span class="hljs-attr">href</span>: <span class="hljs-string">'/my-custom-styles-for-bots.css'</span>,
                    <span class="hljs-attr">position</span>: <span class="hljs-string">'head'</span>,
                },
            ],
            <span class="hljs-attr">script</span>: [
                {
                    <span class="hljs-attr">src</span>: <span class="hljs-string">'/my-custom-lazy-load-for-bots.js'</span>,
                    <span class="hljs-attr">lazy</span>: <span class="hljs-literal">true</span>,
                    <span class="hljs-attr">defer</span>: <span class="hljs-literal">true</span>,
                },
            ],
        },
    };

</code></pre><blockquote><p><strong>N.B.:</strong><em>the config is only shallow merged, not deep merged</em>.</p></blockquote><hr><h3>Related things you should know</h3><ul><li>Usage with<code>types: [ 'default-detect' ]</code>, load the<a href="http://hgoebl.github.io/default-detect.js/">MobileDetect</a>library and check if<code>req.headers[ headerNameForDefaultDetection ]</code>:<ul><li><code>.is( 'bot' )</code>;</li><li>and/or<code>.match( options.auditUserAgent )</code>;</li><li>and/or<code>.match( options.matchUserAgent )</code>;</li></ul></li><li>Nuxt<a href="https://nuxtjs.org/api/configuration-hooks/">hooks</a>, the plugin has access to<code>req.headers</code>only if the project is<strong>running as a server</strong>(ex.<code>nuxt start</code>);</li><li>It use<a href="https://github.com/cheeriojs/cheerio">Cheerio</a>,<em>jQuery for servers</em>, library to<strong>filter and prune</strong>the html.</li></ul><hr><h3>Advices</h3><ul><li>Before setting up the module, try to<a href="https://developers.google.com/web/tools/chrome-devtools/javascript/disable">Disable JavaScript With Chrome DevTools</a>while navigate your website,<strong>this is how your website appear (when<em>prune</em>is activated)</strong>;</li><li>If you<code>generate</code>your site it's not possibile to check<em>req.headers</em>, so, I choose to<strong>always prune</strong>(for types<code>default-detect</code>and/or<code>headers-exist</code>), but You can disable this behavior by setting<code>hookGeneratePage</code>to<code>false</code>(or by using type<code>query-parameters</code>);</li><li>If you use<a href="https://nuxtjs.org/api/components-client-only/"><code>&lt;client-only&gt;</code>components</a>you should prepare a version that is visually the same with the<a href="https://nuxtjs.org/api/components-client-only/">placeholder slot</a>;</li><li>This plugin was thought for<em>Bots / Audits</em>and uses only few<code>methods</code>from the<code>Cheerio</code>library;</li><li>You can check the website as a<em>GoogleBot</em>, following<a href="https://developers.google.com/web/tools/chrome-devtools/device-mode/override-user-agent">this guide</a>.</li></ul><hr><h2>👩🏻‍💻👨🏻‍💻 Development</h2><ol><li><strong>Clone</strong>this repository:<ul><li><code>git clone https://github.com/LuXDAmore/nuxt-prune-html.git</code>;</li></ul></li><li><strong>Install</strong>the dependencies:<ul><li><code>yarn install</code>(or<code>npm install</code>);</li></ul></li><li><strong>Start</strong>the development server:<ul><li><code>yarn dev</code>(or<code>npm run dev</code>);</li></ul></li><li><strong>Extra</strong>, generate the documentation (<a href="https://pages.github.com/"><em>Github Pages</em></a>):<ul><li><code>yarn generate</code>(or<code>npm run generate</code>);</li><li><em>the content is automatically generated into the<code>/docs</code>folder</em>.</li></ul></li></ol><h2>🐞 Issues</h2><p>Please make sure to read the<a href="/.github/ISSUE_TEMPLATE/bug_report.md">Issue Reporting Checklist</a>before opening an issue. Issues not conforming to the guidelines may be closed immediately.</p><h2>👥 Contribution</h2><p>Please make sure to read the<a href="/.github/ISSUE_TEMPLATE/feature_request.md">Contributing Guide</a>before making a pull request.</p><h2>📖 Changelog</h2><p>Details changes for each release are documented in the<a href="./CHANGELOG.md"><strong>release notes</strong></a>.</p><h3>📃 License</h3><p><a href="./LICENSE">MIT License</a>// Copyright (©) 2019-present<a href="https://lucaiaconelli.it">Luca Iaconelli</a></p><h4>💼 Hire me</h4><p><a href="https://lucaiaconelli.it"><img src="https://img.shields.io/badge/Contact%20Me-Let's%20Talk-informational?style=social&amp;logo=minutemailer" alt="Contacts"></a></p><h4>💸 Are you feeling generous today?</h4><p>If You want to share a beer, we can be really good friends 😄</p><p><strong><a href="https://www.paypal.me/luxdamore">Paypal</a>//<a href="https://www.patreon.com/luxdamore">Patreon</a>//<a href="https://ko-fi.com/luxdamore">Ko-fi</a></strong></p><blockquote><p>☀<em>It's always a good day to be magnanimous</em>- cit.</p></blockquote></section></article></main></div></div></body></html>